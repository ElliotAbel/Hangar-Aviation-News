<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Hangar Aviation News Wall</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  html,body{margin:0;height:100%;background:#0b0f14;color:#e6eef7;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  .wrap{height:100%;display:grid;grid-template-rows:auto 1fr}
  header{padding:.6rem 1rem;font-weight:600;opacity:.9}
  #grid{
    display:grid;
    grid-template-columns: repeat(7, 1fr);
    grid-auto-rows:minmax(0,1fr);
    gap:10px;
    padding:10px;
  }
  .tile{background:#121822;border-radius:14px;padding:10px;display:flex;flex-direction:column;
    box-shadow:0 2px 8px rgba(0,0,0,.25);transition:.2s;overflow:hidden}
  .src{font-size:.72rem;opacity:.7;margin-bottom:.25rem}
  .ttl{font-size:.95rem;line-height:1.2;flex:1}
  .meta{display:flex;justify-content:space-between;align-items:center;font-size:.72rem;opacity:.6;margin-top:.4rem}
  .clock{opacity:.7;font-size:.85rem}
  @media(max-width:1400px){#grid{grid-template-columns:repeat(6,1fr)}}
  @media(max-width:1100px){#grid{grid-template-columns:repeat(5,1fr)}}
  @media(max-width:900px){#grid{grid-template-columns:repeat(4,1fr)}}
</style>
</head>
<body>
<div class="wrap">
  <header>Hangar Aviation News â€¢ <span class="clock"></span></header>
  <div id="grid"></div>
</div>

<script>
const APPS_SCRIPT_URL = https://script.google.com/macros/s/AKfycbyqe77iKwfOsGltfyXMsFu2prZZAzcTyFjgH7IPVHrfNbAgopnC273EVWiD7vFNiNBF/exec;
const MAX_TILES = 35;
const REFRESH_MS = 60000;
const grid = document.getElementById('grid');
const clock = document.querySelector('.clock');
let currentLinks = new Set();

function fmtTime(ts){return ts?new Date(ts).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}):'';}
function tickClock(){clock.textContent=new Date().toLocaleString();}
function tileEl(it){
  const a=document.createElement('a');a.href=it.link;a.target="_blank";a.rel="noopener";
  a.className="tile";a.innerHTML=`<div class="src">${it.source}</div><div class="ttl">${it.title}</div><div class="meta"><span>${new URL(it.link).hostname.replace('www.','')}</span><span>${fmtTime(it.pubDate)}</span></div>`;
  return a;
}
function render(items){
  const latest=items.slice(0,MAX_TILES);
  const newSet=new Set(latest.map(i=>i.link));
  Array.from(grid.children).forEach(c=>{const h=c.getAttribute('href');if(!newSet.has(h)){c.remove();currentLinks.delete(h);}});
  for(const it of latest){if(!currentLinks.has(it.link)){grid.appendChild(tileEl(it));currentLinks.add(it.link);}}
}
async function load(){try{const r=await fetch(APPS_SCRIPT_URL,{cache:'no-store'});const d=await r.json();render(d.items||[]);}catch(e){}}
tickClock();setInterval(tickClock,1000);load();setInterval(load,REFRESH_MS);
</script>
</body>
</html>
